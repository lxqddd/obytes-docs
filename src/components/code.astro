---
import { Code as SCode } from '@astrojs/starlight/components'

import fs from 'node:fs/promises';
import { fileURLToPath } from 'node:url';
import { dirname, resolve } from 'node:path';

interface Props {
  file: string;
  language?: string;
  meta?: string;
}

const { file, language, meta } = Astro.props;
const __dirname = dirname(fileURLToPath(import.meta.url));
const fileNamePath = resolve(__dirname, '../../', file);
const fileEtension = file.split('.').pop() ?? 'js';
const code = await fs.readFile(fileNamePath, 'utf-8');
const lang  = language ?? fileEtension;
const metaa =  `title="${file}"` + (meta ? ` ${meta}` : '')


---

<SCode code={code} lang={lang} meta={metaa} />

<!-- <SCode code="console.log('Hello world!')" lang="js" /> -->
